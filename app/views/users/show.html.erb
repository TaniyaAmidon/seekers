<div class="container">
  <div class="d-flex justify-content-between">
    <div class="profile-content">
        <div>
          <div class="card profile-card" style="width: 400px">
            <div class="card-img-top">
              <%= cl_image_tag @user.photo, height: 400, width: 400%>
            </div>

            <div class="card-body">
              <h4 class="card-title" style="text-align: center;"><%= @user.first_name %> <%= @user.last_name %><%= link_to edit_user_path(current_user) do %>
                    <i class="btn fas fa-pencil-alt"></i>
                <% end %></h4>
            </div>

          </div>
        </div>
    </div>
    <div class="user-info"">
      <br>
      <br>
      <div class="profile-text" style="width: 400px">
          <h3 style="text-align: left;"><%= @user.first_name %> <%= @user.last_name %></h3>
          <p>I'm <strong><%= @user.first_name %></strong> from <strong><%= @user.location %></strong>.</p>
          <p><%= @user.bio %></p>
          <p><strong>Contact:</strong> <%= @user.email %></p>
          <%= link_to edit_user_path(current_user) do %>
                     <p>edit profile</p>
                <% end %>

      </div>
    </div>
    <div>

    </div>
  </div>

  <br>
    <div class="tab">
      <button class="tablinks" id="planned_trips_button" onclick="openTrip(event, 'Organised')">Trips I've Planned</button>
      <button class="tablinks inactive" id="joined_trips_button" onclick="openTrip(event, 'Joined')">Trips I've Joined</button>
    </div>

    <div id="organised" class="tabcontent">
      <br>
      <br>
        <div class="row">
          <% x = -1 %>
          <% @planned_trips.each do |planned| %>
          <div class="col-sm-6 col-md-3 trip-column p-3">
            <div id = "profile" class="card trip-card">
              <div class="top">
                <div class="photo-top">
                    <%= cl_image_tag(planned.photo, width: 239, height: 120, crop:"fill") %>
                  <!-- <div class="deposit-status">
                     <p><%# if planned.orders[x] == "paid" %>
                       Deposit paid <i class="fas fa-check-circle"></i>
                    <%# else %>
                    Deposit outstanding <i class="fas fa-exclamation-circle"></i>
                    <%# end %></p>
                    <%# x += 1 %>
                  </div> -->
                </div>
              </div>
              <div class="card-info">
                <div class="title">
                    <%= planned.title %>
                </div>
                <div class="description">
                    <%= planned.description %>
                </div>
                <div class="subtitle">
                        £ <%= planned.price %> <i class="fas fa-circle green-dot"></i> <%=planned.start_date %>
                </div>
                     <%= link_to "", trip_path(planned), class: "stretched-link" %>
              </div>
            </div>
          </div>
          <% end %>
        </div>
    </div>

    <div id="joined" class="tabcontent d-none">
      <br>
      <br>
        <div class="row">
          <% y = -1 %>
          <% @joined_trips.each do |joined| %>
          <div class="col-sm-6 col-md-3 trip-column">
            <div id = "profile" class="card trip-card profile">
              <div class="top">
                <div class="photo-top">
                    <%= cl_image_tag(joined.photo, width: 239, height: 120, crop:"fill") %>
                  <!-- <div class="deposit-status"> -->
                     <!-- <p><%# if joined.orders[y] == "paid" %> -->
                       <!-- Deposit paid <i class="fas fa-check-circle"></i> -->
                    <%# else %>
                   <!--  Deposit outstanding <i class="fas fa-exclamation-circle"></i> -->
                    <%# end %><!-- </p> -->
                    <%# y += 1 %>
                 <!--   </div>  -->
                </div>
              </div>
              <div class="card-info">
                <div class="title">
                    <%= joined.title %>
                </div>
                <div class="description">
                    <%= joined.description %>
                </div>
                <div class="subtitle">
                        £ <%= joined.price %> | </i> <%=joined.start_date %>
                </div>
                     <%= link_to "", trip_path(joined), class: "stretched-link" %>
              </div>
            </div>
        </div>
          <% end %>
    </div>
  </div>
</div>


<!-- tabs -->
<script>
  btnJoinedTrip = document.getElementById('joined_trips_button');
  btnPlannedTrip = document.getElementById('planned_trips_button');
  organized = document.getElementById('organised');
  joined = document.getElementById('joined');

  btnPlannedTrip.addEventListener('click', (event) => {
    btnPlannedTrip.classList.remove('inactive');
    btnJoinedTrip.classList.add('inactive');
    organized.classList.remove('d-none');
    joined.classList.add('d-none');
  });
  btnJoinedTrip.addEventListener('click', (event) => {
    btnJoinedTrip.classList.remove('inactive');
    btnPlannedTrip.classList.add('inactive');
    organized.classList.add('d-none');
    joined.classList.remove('d-none');
  });
         // Window.onLoad= openTrip(event, 'Joined');


         //  function openTrip(evt, tripName) {
         //    var i, tabcontent, tablinks;
         //    tabcontent = document.getElementsByClassName("tabcontent");
         //    for (i = 0; i < tabcontent.length; i++) {
         //      tabcontent[i].style.display = "none";
         //    }
         //    tablinks = document.getElementsByClassName("tablinks");
         //    for (i = 0; i < tablinks.length; i++) {
         //      tablinks[i].className = tablinks[i].className.replace(" active", "");
         //    }
         //    document.getElementById(tripName).style.display = "block";
         //    evt.currentTarget.className += " active";
         //  }

</script>


